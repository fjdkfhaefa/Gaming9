
<!-- saved from url=(0075)https://fjdkfhaefa.github.io/Gaming9/BingChatSpeech&txtAnimv1.1cGaming.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body id="body">
    <video id="camera-preview" autoplay=""></video>
    <aside>
        <div id="ninja" style="display: block;">
            <a href="https://fjdkfhaefa.github.io/Gaming9/index.html"><div id="home"></div></a>
            <div id="full0" onclick="full0click()">
                <div class="bow" id="x0" style="width: 22.68px; height: 9.072px; position: relative; left: -27.216px; top: -27.216px;">
                    <div class="bow" id="y0" style="width: 9.072px; height: 22.68px;position: relative; left: 0px; top: 3.1752px;">
                    </div>
                </div>
                <div class="bow" id="x1" style="width: 22.68px; height: 9.072px;position: relative; top: -36.288px; left: 20.412px;">
                    <div class="bow" id="y1" style="width: 9.072px; height: 22.68px;position: relative; top: 3.1752px; left: 13.608px;">
                    </div>
                </div>
                <div class="bow" id="x2" style="width: 22.68px; height: 9.072px;position: relative; top: 18.144px; left: 20.412px;">
                    <div class="bow" id="y2" style="width: 9.072px; height: 22.68px;position: relative; top: -15.876px; left: 13.608px;">
                    </div>
                </div>
                <div class="bow" id="x3" style="width: 22.68px; height: 9.072px;position: relative; top: 9.072px; left: -27.216px;">
                    <div class="bow" id="y3" style="width: 9.072px; height: 22.68px;position: relative; top: -15.876px; left: 0px;">
                    </div>
                </div>
            </div>
            <label for="speed" class="input-label">RGB速度</label>
            <input type="range" id="speed" name="speed" min="0" max="30" class="input-field">
            
            <label for="speed2" class="input-label">再生速度</label>
            <input type="range" id="speed2" name="speed2" min="0" max="100" value="10" class="input-field">
            
            <label for="pitch" class="input-label">音の高さ</label>
            <input type="range" id="pitch" name="pitch" min="0" max="100" value="100" class="input-field">
            <input type="text" id="textInput" placeholder="Enter text">
            <button id="pause">Pause</button>
            <div class="check">
                <input type="checkbox" id="toggleSwitch" checked="checked">自動削除&nbsp;
            </div>
            <div class="check">
                <input type="checkbox" id="realTime">随時入力&nbsp;
            </div>
            <div class="check">
                <input type="checkbox" id="chat" checked="checked">ChatGPTアシスト&nbsp;
            </div>
            <div class="check">
                <input type="checkbox" id="jido">自動再生&nbsp;
            </div>
        </div>
        <button class="menu-button" onclick="ninja()">忍者</button>

    </aside>

    <div id="parent" style="background-color: black;">
        <div id="txtErea" style="color: rgb(145, 110, 255);">左の欄に入力してくだ</div>
        
    </div>
    <div class="memoArea">
        <h1>入力履歴</h1>

        <div id="memoList" style="color: rgb(145, 110, 255);"><div class="memoItem"><strong>Memo 1:</strong> ありがとうございました。 <em>at 2023/11/22 21:59:53</em> <span class="editButton" onclick="editMemo(0)">Edit</span> <span class="deleteButton" onclick="deleteMemo(0)">Delete</span></div><div class="memoItem"><strong>Memo 2:</strong> ありがとうございました。ああああああ <em>at 2023/11/22 22:00:02</em> <span class="editButton" onclick="editMemo(1)">Edit</span> <span class="deleteButton" onclick="deleteMemo(1)">Delete</span></div><div class="memoItem"><strong>Memo 3:</strong> ありがとうございました。あああああああ！ <em>at 2023/11/22 22:00:26</em> <span class="editButton" onclick="editMemo(2)">Edit</span> <span class="deleteButton" onclick="deleteMemo(2)">Delete</span></div><div class="memoItem"><strong>Memo 4:</strong> ありがとうございました。a <em>at 2023/11/23 9:08:10</em> <span class="editButton" onclick="editMemo(3)">Edit</span> <span class="deleteButton" onclick="deleteMemo(3)">Delete</span></div></div>
    </div>
    <footer>
        <div id="c">
            <p>CofeeRight ｃ 2023 木村東方技術. All Lights Reserved.<br>DesighnWidth ChatGPT</p>
        </div>
    </footer>
    <style>
        .memoArea{
            background-color: rgba(76, 76, 76);
            color: white;
            padding: 10px;

        }

        #memoList {
            margin-top: 0px;
            height: 150px;
            overflow-y: auto;
            overflow-x: hidden;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 10px;
            font-size: 150%;
        }

        .memoItem {
            margin-bottom: 10px;
        }

        .editButton, .deleteButton {
            margin-left: 10px;
            cursor: pointer;
            color: blue;
            text-decoration: underline;
        }

        /* 全体のスタイル */
        .input-field {
        width: 100%;
        }
        #textInput {
        width: 100%;
        margin: 0 auto 10px 0;
        }
        
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
            padding: 0;
            background-image: url("path/to/your/image.jpg");
            background-size: cover;
            overflow-y: auto;
            overflow-x: hidden;
        }
    
        /* アサイド要素 */
        aside {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            margin-right: 0px;
            overflow-y: hidden;
        }
        

        /* メニューボタン */
        .menu-button {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 10px;
            margin-bottom: 10px;
            transition: background-color 0.3s ease;
            border-radius: 5px;
        }
    
        .menu-button:hover {
            background-color: rgba(135, 206, 250, 0.5);
        }
    
        /* 要素配置コンテナ */
        #parent {
            display: flex;
            flex-wrap: wrap;
            justify-content: flex-end;
            padding: 0px;
            flex-grow: 1;
            width: 100%;
            height: 200px;

        }
    
        /* テキストエリア */
        #txtErea {
            color: white;
            font-size: 150%;
            height: max-content;
            background-color: rgb(68, 68, 68);
        }
    
        /* フッター */
        footer {
            background-color: rgba(127, 127, 127);
            color: white;
            padding: 10px;
            display: flex;
            justify-content: center;
            transition: height 0.3s ease;
        }
    
        /* コピーライトテキスト */
        #c p {
            margin: 0;
            text-align: center;
        }
    
        /* フォーカス時のスタイル */
        :focus {
            outline: none;
        }
    
        /* ボタンやinput要素のスタイル */
        button,
        input[type="checkbox"],
        input[type="text"] {
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            padding: 5px;
            margin-bottom: 5px;
            transition: background-color 0.3s ease;
            border-radius: 5px;
            font-size: 150%;
        }
    
        button:hover,
        input[type="checkbox"]:hover,
        input[type="text"]:hover {
            background-color: rgba(135, 206, 250, 0.5);
        }
    
        /* チェックボックスのスタイル */
        .check {
            display: flex;
            align-items: center;
            color: white;
            font-size: 150%;
            display: inline-block;
        }
        .check input[type="checkbox"] {
            width: 50px;
            height: 50px;


        }
        /* ラベルのスタイル */
        label {
            color: white;
            font-size: 150%;
        }
    
        /* 縦の長さが短い場合のフッターのスタイル */
        @media (max-height: 300px) {
            footer {
                display: none;
           
            }
        }
        video {
            width: 100%;
            height: 100vh;
            object-fit: cover; /* カメラ映像を元のアスペクト比を保ちつつ全体に表示 */
            position: fixed;
            top: 0;
            left: 0;
            z-index: -1; /* 他のコンテンツよりも奥に配置 */
        }
    </style>
    

    
    
    

<script>

    //alert("二次転載禁止")
    document.addEventListener('DOMContentLoaded', () => {
      const videoElement = document.getElementById('camera-preview');

      // カメラの起動
      navigator.mediaDevices.getUserMedia({ video: true })
        .then((stream) => {
            document.getElementById("parent").style.backgroundColor = "rgba(0,0,0,0.5)";
          videoElement.srcObject = stream;

          // カメラのサイズを画面サイズに合わせる
          const resizeCamera = () => {
            const { width, height } = document.body.getBoundingClientRect();
            videoElement.width = width;
            videoElement.height = height;
          };

          // ウィンドウサイズが変更された時にカメラのサイズを再設定
          window.addEventListener('resize', resizeCamera);
          resizeCamera();
        })
        .catch((error) => {
            document.getElementById("parent").style.backgroundColor = "black";
          console.error('カメラの起動に失敗しました: ', error);
          alert("camera Not found..");

        });
    });
    var hide = false
    var foodsAry = ["寿司"]
    var isChat = true

    function ninja(){
        if(hide == false){
            document.getElementById("ninja").style.display = "none"
            hide = true
        }else{
            document.getElementById("ninja").style.display = "block"
            hide = false
        }

    }
    function full0click(){
        if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
        } else if (document.exitFullscreen) {
        document.exitFullscreen();
        }
        // サイズを取得

    }
//selectedTxtは2DシューティングのBIGINNINGのコードだけどここではタイピング風アニメーション作るための
//見かけのコードでただの文字列
var text0 = `左の欄に入力してください。現在開発中です。`

var speed = 5
var pitchNum = 100
var selectedTxt = text0
var uttr = new SpeechSynthesisUtterance(selectedTxt)
var repeat = false
var realTime = false
var deleted = false
var isJido = false
var memoNum = 0
var memoLen = 0
var body = document.getElementById("txtErea");

uttr.rate = speed
// 発言を再生 (発言キューに発言を追加)
speechSynthesis.speak(uttr)
spmeter = document.getElementById("speed")
spmeter2 = document.getElementById("speed2")
spmeter.addEventListener("input", (event) => {
    cRate = Number(event.target.value)
})
// チェックボックスを取得
var checkbox = document.getElementById("toggleSwitch");
var isRealTime = document.getElementById("realTime");
var chat = document.getElementById("chat");
var jido = document.getElementById("jido");

// 取得したチェックボックスに対して処理を行う
checkbox.addEventListener("change", function() {
    if (this.checked) {
        // チェックされた場合の処理
        //console.log("チェックされました");
        repeat = false//自動削除
    } else {
        // チェックが外された場合の処理
        //console.log("チェックが外れました");
        repeat = true
    }
});
isRealTime.addEventListener("change", function() {
    if (this.checked) {
        // チェックされた場合の処理
        console.log("チェックされました");
        realTime = true
    } else {
        // チェックが外された場合の処理
        console.log("チェックが外れました");
        realTime = false
    }
});
chat.addEventListener("change", function() {
    if (this.checked) {
        // チェックされた場合の処理
        //console.log("チェックされました");
        isChat = true
    } else {
        // チェックが外された場合の処理
        //console.log("チェックが外れました");
        isChat = false
    }
});
jido.addEventListener("change", function() {
    if (this.checked) {
        // チェックされた場合の処理
        //console.log("チェックされました");
        isJido = true
    } else {
        // チェックが外された場合の処理
        //console.log("チェックが外れました");
        isJido = false
    }
});
editMemo(0);//最初
// ...（スクリプトの残りの部分）

function ini() {
    speechSynthesis.cancel();
    uttr = new SpeechSynthesisUtterance(selectedTxt);
    uttr.rate = speed / 10;
    uttr.pitch = pitchNum / 50;
    uttr.volume = 1.0;
    speechSynthesis.speak(uttr);
    body.textContent = ""; // これで 'body' が定義されています
    count = 0;
    var text = "読み上げるテキスト";

    uttr.addEventListener("end", function () {
        // 読み上げが終了したらリピートする
        speechSynthesis.speak(uttr);
        if (repeat == false && deleted == false) {
            document.getElementById("textInput").value = "";
            if (isJido) {
                if (memoNum < memoLen) {
                    memoNum++;
                    console.log(memoNum + "num22222222222222222222222222222222222222222222222222222222");
                } else {
                    //memoNum = 0;
                }
                console.log(memoLen + "len");
                console.log(memoNum + "num");
                editMemo(memoNum);
            }
            selectedTxt = "";
            deleted = true;
            speechSynthesis.cancel();
            convert();
            animation();
        }
    });
}

// ...（スクリプトの残りの部分）
window.addEventListener('beforeunload', function (event) {
    // `speechSynthesis`の読み上げを停止する
    speechSynthesis.cancel();
});
spmeter2.addEventListener("input", (event) => {
    speed = Number(event.target.value)
    stop = false
    ini()
    convert()
    animation()
    
})
var _pitch = document.getElementById("pitch");

_pitch.addEventListener("input", (event) => {
    pitchNum = Number(event.target.value)
    stop = false
    ini()
    convert()
    animation()
    
})
document.getElementById("pause").addEventListener("click",function(){
    pauseAnimation()
})
function pauseAnimation() {
    if(stop == false){
        stop = true
        speechSynthesis.pause();
    }else{
        stop = false
        //uttr.volume = 1.0;
        speechSynthesis.resume();
        animation()
    }
}
var machNum = 2
function isKatakana(_text) {
  return /^[\u30A0-\u30FFー]+$/.test(_text);
}

function isHiragana(_text) {
  return /^[\u3040-\u309Fー]+$/.test(_text);
}
function katakanaToHiragana(_text) {
  return _text.replace(/[\u30A1-\u30F6]/g, function(match) {
    var code = match.charCodeAt(0) - 0x60;
    return String.fromCharCode(code);
  });
}
function hiraganaToKatakana(_text) {
  return _text.replace(/[\u3041-\u3096]/g, function(match) {
    var code = match.charCodeAt(0) + 0x60;
    return String.fromCharCode(code);
  });
}

// 使用例
var katakanaText = "コンニチハ";
var hiraganaText = katakanaToHiragana(katakanaText);
var inputText = ""
var isLoaded = 0

function search(){
    isLoaded++
    if(isChat){
        // a の先頭から2文字が b の要素の先頭から2文字以上と完全に一致する場合の処理
        var matchingItems = foodsAry.filter(item => {
            return item.slice(0, machNum) === inputText.slice(0, machNum);
        });
        var perfect = foodsAry.filter(item => item.includes(inputText));
        //console.log(matchingItems)
        if(matchingItems.length > 0){//候補が複数見つかった場合
            if(perfect.length > 0){//inputの文字列と配列の先頭から２文字完全一致
                selectedTxt = "一致する要素が見つかりました。:"+perfect
            }else{
                selectedTxt = "以下の要素をお探しですか？:"+matchingItems
            }
            //console.log(perfect);
        }else{
            var research = foodsAry.filter(function(element) {
                return element.includes(inputText.substring(0, 2));
            });
            if(research.length > 0){
                selectedTxt = "以下の要素をお探しですか？:"+research.join(", "); // 配列をカンマ区切りの文字列に変換
                console.log(selectedTxt)
            }else{
                if(isHiragana(inputText) && isLoaded < 2){
                    inputText=hiraganaToKatakana(inputText)
                    search()
                }else if(isKatakana(inputText) && isLoaded < 2){
                    inputText=katakanaToHiragana(inputText)
                    search()
                }else{
                    selectedTxt = "一致する要素はありませんでした"+inputText
                }
            }

            
        }
    }
    
}
console.log(hiraganaText);  // こんにちは

function reload(){
    inputText = document.getElementById("textInput").value;
    selectedTxt = inputText
    search()
    isLoaded = 0
    ini()
    convert()
    animation()
}

document.getElementById("textInput").addEventListener("input", function () {
    if(realTime == true){
        deleted = false
        reload()
    }else{
        
    }
    
    // 入
})
document.getElementById("textInput").addEventListener("blur", function () {
    saveMemo()
    if(realTime == false){
        deleted = false
        reload()

    }else{

    }

    // 入
})

var txt1 = 0
var n = [0]
var space = [0]
var body = 0
//body.style.color = "lime"

var lineBreaks = 0
var spaces = 0
function convert(){
    txt1 = selectedTxt.split(``)
    n = [0]
    space = [0]
    body = document.getElementById("txtErea")
    //body.style.color = "lime"

    lineBreaks = (selectedTxt.match(/\n/g) || []).length;
    spaces = (selectedTxt.match(/ /g) || []).length;

    //console.log("空白の数:", spaces);
    //console.log("改行の数:", lineBreaks);

    while(n.length < lineBreaks){
        n.push(txt1.indexOf(`\n`,n[n.length-1]+1))
        txt1.splice(n[n.length-1],1,`<br>`)
    }
    while(space.length < spaces){
        space.push(txt1.indexOf(` `,space[space.length-1]+1))
        txt1.splice(space[space.length-1],1,`&nbsp;`)
    }
}convert()
var r = 255
var r2 = 255
var g = 0
var b = 0
var red=false
var redMinus = true
var green = true
var greenMinus = false
var blue = false
var blueMinus = false

var count = 0
var top = 0
var fonts = 10
var stop = false
var cRate = 10
var spNum = 0
function animation(){
    if(count < txt1.length){

        body.insertAdjacentHTML('beforeend',txt1[count])
        //window.scrollTo(0,200000)
        count++
    }else{
        count=0
	    body.textContent = ""
    }
    if(stop == false){

	//ctx.fillStyle = `rgb(${r},${g},${b})`

        setTimeout(animation,((100-speed)*6)*Math.random())
    }
}animation()
document.addEventListener("keydown",function(event){
    if(event.key == " "){
        pauseAnimation()
    }
})
        // ページが読み込まれた時にメモをロードする
        window.onload = function () {
            loadMemo();
        };

        // メモをローカルストレージに保存する関数
        function saveMemo() {
            var memoText = document.getElementById('textInput').value;

            if (memoText.trim() === "") {
                alert("Please enter a memo before saving.");
                return;
            }

            var timestamp = new Date().toLocaleString();
            var memoData = {
                text: memoText,
                timestamp: timestamp
            };

            // 保存されたメモのリストを取得
            var memoList = JSON.parse(localStorage.getItem('memoList')) || [];

            // 新しいメモをリストに追加
            memoList.push(memoData);

            // ローカルストレージに保存
            localStorage.setItem('memoList', JSON.stringify(memoList));


            // メモ一覧を再表示
            loadMemo();
        }

        // ローカルストレージからメモを読み込んで表示する関数
        function loadMemo() {
            var memoList = JSON.parse(localStorage.getItem('memoList')) || [];
            var memoListContainer = document.getElementById('memoList');
            memoListContainer.innerHTML = "";

            memoList.forEach(function (memoData, index) {
                
                var memoItem = document.createElement('div');
                memoItem.className = 'memoItem';
                memoItem.innerHTML = '<strong>Memo ' + (index + 1) + ':</strong> ' + memoData.text +
                    ' <em>at ' + memoData.timestamp + '</em>' +
                    ' <span class="editButton" onclick="editMemo(' + index + ');memoNum = ' + index + '">Edit</span>' +
                    ' <span class="deleteButton" onclick="deleteMemo(' + index + ')">Delete</span>';
                memoListContainer.appendChild(memoItem);
            });
        }

        function editMemo(index) {
            if(isJido){
                index = memoNum;
            }
            var memoList = JSON.parse(localStorage.getItem('memoList')) || [];
            memoLen = memoList.length;
            console.log(index);
            // 編集前にフォーカスをtextInputに戻す
            document.getElementById("textInput").focus();
            
            document.getElementById("textInput").value = memoList[index].text;
            reload();
            var editedMemoText = document.getElementById("textInput").value;

            if (editedMemoText !== null) {
                memoList[index].text = editedMemoText;
                localStorage.setItem('memoList', JSON.stringify(memoList));
                loadMemo();
            }
        }



        // メモを削除する関数
        function deleteMemo(index) {
            var memoList = JSON.parse(localStorage.getItem('memoList')) || [];
            var isSure = true;

            if (isSure) {
                memoList.splice(index, 1);
                localStorage.setItem('memoList', JSON.stringify(memoList));
                loadMemo();
            }
        }
        function color(){
            body.style.color = `rgb(${r2},${g},${b})`
            document.getElementById('memoList').style.color = `rgb(${r2},${g},${b})`
            if(red){
		if(r2<255){
			r2+=cRate
		}else{
			red=false
			greenMinus=false
			blueMinus=true
			green=true
		}
	}
	if(redMinus){
		if(r2>0){
			r2-=cRate
		}

	}
	if(green){
		if(g<255){//r=255,gは0から255まで上昇中
			g+=cRate
		}else{//r=255から減少,g=255のまま
			green=false
			redMinus = true
			blueMinus = false
			blue=true
		}
	}
	if(greenMinus){
		if(g>0){
			g-=cRate
		}

	}
	if(blue){
		if(b<255){//
			b+=cRate
		}else{
			blue=false
			greenMinus = true
			redMinus = false
			red=true
		}
	}
	if(blueMinus){
		if(b>0){
			b-=cRate
		}

	}
            requestAnimationFrame(color)
        }color();
</script>



</body></html>
