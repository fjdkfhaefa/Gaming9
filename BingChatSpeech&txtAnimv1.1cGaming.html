
<!-- saved from url=(0075)https://fjdkfhaefa.github.io/Gaming9/BingChatSpeech&txtAnimv1.1cGaming.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body id="body">
    <aside>
        <div id="ninja">
            <a href="https://fjdkfhaefa.github.io/Gaming9/index.html"><div id="home"></div></a>
            <div id="full0" onclick="full0click()">
                <div class="bow" id="x0" style="width: 22.68px; height: 9.072px; position: relative; left: -27.216px; top: -27.216px;">
                    <div class="bow" id="y0" style="width: 9.072px; height: 22.68px;position: relative; left: 0px; top: 3.1752px;">
                    </div>
                </div>
                <div class="bow" id="x1" style="width: 22.68px; height: 9.072px;position: relative; top: -36.288px; left: 20.412px;">
                    <div class="bow" id="y1" style="width: 9.072px; height: 22.68px;position: relative; top: 3.1752px; left: 13.608px;">
                    </div>
                </div>
                <div class="bow" id="x2" style="width: 22.68px; height: 9.072px;position: relative; top: 18.144px; left: 20.412px;">
                    <div class="bow" id="y2" style="width: 9.072px; height: 22.68px;position: relative; top: -15.876px; left: 13.608px;">
                    </div>
                </div>
                <div class="bow" id="x3" style="width: 22.68px; height: 9.072px;position: relative; top: 9.072px; left: -27.216px;">
                    <div class="bow" id="y3" style="width: 9.072px; height: 22.68px;position: relative; top: -15.876px; left: 0px;">
                    </div>
                </div>
            </div>
            <input type="range" id="speed" name="speed" min="0" max="30">
            <input type="range" id="speed2" name="speed2" min="0" max="100" value="10">
            <input type="text" id="textInput" placeholder="Enter text">
            <button id="pause">Pause</button>
            <div class="check">
                <input type="checkbox" id="toggleSwitch"checked="checked">自動削除&nbsp;
            </div>
            <div class="check">
                <input type="checkbox" id="realTime" >随時入力&nbsp;
            </div>

        </div>
        <button class="menu-button" onclick="ninja()">忍者</button>

    </aside>
    
    <div id="parent">
        <div id="txtErea" style="color: rgb(255, 120, 140);"></div>
        
    </div>
    <footer>
        <div id="c">
            <p>Copyright © 2023 ⑨な人PJT. All Rights Reserved.</p>
        </div>
    </footer>
<style>
    footer{
        background-color: #333;
        text-align: center;
        width:100%;
        height: 60px;
        position: absolute;
        bottom: 0;
        left: 0;
        color:white;
    }
    #c{
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .menu-button {
    padding: 10px 20px;
    font-size: 200%;
    border: none;
    background-color: rgba(255,255,255,0.7);
    color: #333;
    border-radius: 10px;
    cursor: pointer;
    transition: background-color 0.3s linear;
    }

    .menu-button:hover,
    .menu-button:focus {
    background-color: transparent;
    background-image: linear-gradient(to right, rgba(255,255,255,0.7), transparent);
    }

    .menu-button:focus {
    outline: none;
    box-shadow: 0 0 0 2px #999;
    }
    .check {
        transform: scale(3);
        margin-right: 160px;
        margin-top: 50px;
        float: right;
        color: white;
        font-size: 50%;
        width: max-content;
        height: max-content;
        display: flex;
        align-items: center;
        background-color: rgba(0, 0, 0, 0.2);
        border-radius: 4px;
        transition: background-color 0.3s ease, color 0.3s ease; /* トランジション効果を追加 */
    }

    .check:hover {
        background-color: rgba(0, 0, 0, 0.4); /* ホバー時の背景色 */
        color: #fff; /* ホバー時の文字色 */
    }

    #textInput {
        padding: 10px;
        font-size: 150%;
        border: none;
        border: 4px solid white;
        border-radius: 10px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        transition: border-color 0.3s ease,color 0.3s ease,background-color 0.3s ease;
        float: right; /* 右寄せ */
        width: 200px; /* 必要な幅を指定 */
        background-color: rgba(0, 0, 0, 0.1); /* 背景色を透明にする */
        color: white; /* テキストの初期色を白にする */
        margin-right: 100px; /* 右からの距離を調整 */
        margin-top:150px;
        width: 300px;
        height: 60px;
    }

    #textInput:hover {
        border-color: skyblue; /* ホバー時のボーダーの色 */
        color: skyblue; /* ホバー時のテキストの色 */
        background-color:rgba(135, 207, 235, 0.233)
    }

    #textInput:focus {
        outline: none;
        border-color: skyblue; /* 入力中のボーダーの色 */
        color: skyblue; /* 入力中のテキストの色 */
        background-color:rgba(0, 0, 0, 0.4);
    }

    button {
        padding: 10px 20px;
        font-size: 16px;
        border: white solid 4px;
        border-radius: 10px;
        background-color: rgba(0, 0, 0, 0.1);
        color: white;
        transition: border-color 0.3s ease,color 0.3s ease,background-color 0.3s ease;
        float: right;
        margin-right: 100px;
        margin-top: 40px;
        font-size: 170%;
        padding: 10px;
    }

    button:hover {
        border-color: skyblue; /* ホバー時の背景色を水色に設定 */
        color: skyblue;
        background-color: rgba(135, 207, 235, 0.233)
    }


    #parent{
        display: flex;
        width: 96%;
        height: max-content;
        min-height: 100px;
        justify-content: center;
        
    }

    #txtErea{
        display: block;
        width: 100%;
        background-color: rgba(0,0,0,0.7);
        border-radius: 10px;
        padding: 10px;
        font-size: 150%;
    }
    body{
        background-image: url(https://pbs.twimg.com/media/FyJMTtxaUAEGoCj?format=jpg&name=large);
    }
    aside{
        position:fixed;
        right: -50px;
        width: 250px;
    }
    #home{
        position: relative;
		right: -50px;
        width:50px;height:50px;border:solid 10px gray;border-radius:100px;margin:20px;
    }
    #home:hover{
        border-color: skyblue;
    }
    .bow{
        background-color: gray
    }
    #full0{
        width: auto;
        height: auto;
        position:relative;
        top:50px;
        right: -100px;
    }
    #full0:hover .bow{
        background-color: skyblue;
    }
    #speed{
        right: 100px;
        width:200px;
        top:100px;
        position:relative;
        display: block;
        transform: scale(1.5);
    }
    #speed2{
        right: 100px;
        width:200px;
        top:120px;
        position:relative;
        display: block;
        transform: scale(1.5);
    }
</style>

<script>
    var hide = false
    function ninja(){
        if(hide == false){
            document.getElementById("ninja").style.display = "none"
            hide = true
        }else{
            document.getElementById("ninja").style.display = "block"
            hide = false
        }

    }
    function full0click(){
        if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
        } else if (document.exitFullscreen) {
        document.exitFullscreen();
        }
        // サイズを取得

    }
//selectedTxtは2DシューティングのBIGINNINGのコードだけどここではタイピング風アニメーション作るための
//見かけのコードでただの文字列
var text0 = `左の欄に入力してください。現在開発中です。`

var speed = 1
var selectedTxt = text0
var uttr = new SpeechSynthesisUtterance(selectedTxt)
var repeat = false
var realTime = false
var deleted = false
uttr.rate = speed
// 発言を再生 (発言キューに発言を追加)
uttr.volume = 1.0
window.speechSynthesis.speak(uttr)
spmeter = document.getElementById("speed")
spmeter2 = document.getElementById("speed2")
spmeter.addEventListener("input", (event) => {
    cRate = Number(event.target.value)
})
// チェックボックスを取得
var checkbox = document.getElementById("toggleSwitch");
var isRealTime = document.getElementById("realTime");

// 取得したチェックボックスに対して処理を行う
checkbox.addEventListener("change", function() {
    if (this.checked) {
        // チェックされた場合の処理
        console.log("チェックされました");
        repeat = false
    } else {
        // チェックが外された場合の処理
        console.log("チェックが外れました");
        repeat = true
    }
});
isRealTime.addEventListener("change", function() {
    if (this.checked) {
        // チェックされた場合の処理
        console.log("チェックされました");
        realTime = true
    } else {
        // チェックが外された場合の処理
        console.log("チェックが外れました");
        realTime = false
    }
});
function ini(){
    speechSynthesis.cancel()
    uttr = new SpeechSynthesisUtterance(selectedTxt)
    uttr.rate = speed/10
    window.speechSynthesis.speak(uttr)
    body.textContent = ""
    count = 0
    var text = "読み上げるテキスト";
    
    uttr.addEventListener("end", function () {
        // 読み上げが終了したらリピートする
        uttr.volume = 1.0
        window.speechSynthesis.speak(uttr)
        if(repeat == false && deleted == false){//読み上げが終わったかつ随時入力オフ
            //alert("製作中")
            document.getElementById("textInput").value = ""
            selectedTxt = ""
            deleted = true
            window.speechSynthesis.cancel()
            //ini()は実行済み
            convert()
            animation()
        }

    });

}
window.addEventListener('beforeunload', function (event) {
    // `speechSynthesis`の読み上げを停止する
    speechSynthesis.cancel();
});
spmeter2.addEventListener("input", (event) => {
    speed = Number(event.target.value)
    stop = false
    ini()
    convert()
    animation()
    
})
document.getElementById("pause").addEventListener("click",function(){
    pauseAnimation()
})
function pauseAnimation() {
    if(stop == false){
        stop = true
        window.speechSynthesis.pause();
    }else{
        stop = false
        uttr.volume = 1.0;
        window.speechSynthesis.resume();
        animation()
    }
}
function reload(){
    var inputText = document.getElementById("textInput").value;
    selectedTxt = inputText
    ini()
    convert()
    animation()
}

document.getElementById("textInput").addEventListener("input", function () {
    if(realTime == true){
        deleted = false
        reload()
    }else{
        
    }
    
    // 入
})
document.getElementById("textInput").addEventListener("blur", function () {
    if(realTime == false){
        deleted = false
        reload()
    }else{

    }

    // 入
})

var txt1 = 0
var n = [0]
var space = [0]
var body = 0
//body.style.color = "lime"

var lineBreaks = 0
var spaces = 0
function convert(){
    txt1 = selectedTxt.split(``)
    n = [0]
    space = [0]
    body = document.getElementById("txtErea")
    //body.style.color = "lime"

    lineBreaks = (selectedTxt.match(/\n/g) || []).length;
    spaces = (selectedTxt.match(/ /g) || []).length;

    //console.log("空白の数:", spaces);
    //console.log("改行の数:", lineBreaks);

    while(n.length < lineBreaks){
        n.push(txt1.indexOf(`\n`,n[n.length-1]+1))
        txt1.splice(n[n.length-1],1,`<br>`)
    }
    while(space.length < spaces){
        space.push(txt1.indexOf(` `,space[space.length-1]+1))
        txt1.splice(space[space.length-1],1,`&nbsp;`)
    }
}convert()
var r = 255
var r2 = 255
var g = 0
var b = 0
var red=false
var redMinus = true
var green = true
var greenMinus = false
var blue = false
var blueMinus = false

var count = 0
var top = 0
var fonts = 10
var stop = false
var cRate = 10
var spNum = 0
function animation(){
    if(count < txt1.length){

        body.insertAdjacentHTML('beforeend',txt1[count])
        window.scrollTo(0,200000)
        count++
    }else{
        count=0
	    body.textContent = ""
    }
    if(stop == false){
if(red){
		if(r2<255){
			r2+=cRate
		}else{
			red=false
			greenMinus=false
			blueMinus=true
			green=true
		}
	}
	if(redMinus){
		if(r2>0){
			r2-=cRate
		}

	}
	if(green){
		if(g<255){//r=255,gは0から255まで上昇中
			g+=cRate
		}else{//r=255から減少,g=255のまま
			green=false
			redMinus = true
			blueMinus = false
			blue=true
		}
	}
	if(greenMinus){
		if(g>0){
			g-=cRate
		}

	}
	if(blue){
		if(b<255){//
			b+=cRate
		}else{
			blue=false
			greenMinus = true
			redMinus = false
			red=true
		}
	}
	if(blueMinus){
		if(b>0){
			b-=cRate
		}

	}
	//ctx.fillStyle = `rgb(${r},${g},${b})`
	body.style.color = `rgb(${r2},${g},${b})`
        setTimeout(animation,((100-speed)*5)*Math.random())
    }
}animation()
document.addEventListener("keydown",function(event){
    if(event.key == " "){
        pauseAnimation()
    }
})
</script>
</body></html>
